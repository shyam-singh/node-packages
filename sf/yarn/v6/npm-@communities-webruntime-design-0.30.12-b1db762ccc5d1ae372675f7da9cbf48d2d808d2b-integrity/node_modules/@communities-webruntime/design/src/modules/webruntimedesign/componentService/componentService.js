/**
 * Copyright (c) 2019, salesforce.com, inc.
 * All rights reserved.
 * SPDX-License-Identifier: MIT
 * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/MIT
 */

import loader from 'webruntime_loader/loader';
import { getDesignComponentModuleSpecifier } from '@communities-webruntime/common';

async function generateComponent(id) {
    // resolve the module specifier, this will return either return the module URL
    // or the specifier itself depending or whether the module has alrerady been loaded
    const designSpecifier = getDesignComponentModuleSpecifier(id);
    const resolvedId = loader.resolve(designSpecifier);

    // delete the module from the registry to make sure we get a fresh copy
    loader.delete(designSpecifier);

    // get and return the fresh copy
    const module = await loader.load(resolvedId);
    return module.default;
}

export default { generateComponent };
