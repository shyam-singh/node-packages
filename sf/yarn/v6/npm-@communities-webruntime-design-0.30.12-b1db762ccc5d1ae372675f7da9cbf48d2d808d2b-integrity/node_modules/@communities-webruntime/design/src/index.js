/**
 * Copyright (c) 2019, salesforce.com, inc.
 * All rights reserved.
 * SPDX-License-Identifier: MIT
 * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/MIT
 */
import { defineModules } from 'webruntime_loader/loader';
import { start } from 'webruntimedesign/designmode';
import componentWrapper from 'webruntimedesign/componentWrapper';
import regionWrapper from 'webruntimedesign/regionWrapper';
import dropRegion from 'webruntimedesign/dropRegion';
import componentService from 'webruntimedesign/componentService';
import designComponent from 'webruntimedesign/designComponent';

/*
 * Register framework modules available to templates modules.
 */
defineModules({
    'webruntimedesign/componentWrapper': componentWrapper,
    'webruntimedesign/regionWrapper': regionWrapper,
    'webruntimedesign/dropRegion': dropRegion,
    'webruntimedesign/componentService': componentService,
    'webruntimedesign/designComponent': designComponent,
});

// Initialize designmode when DOM is ready.
if (/interactive|complete/.test(document.readyState)) {
    // DOMContentLoaded has already been fired
    start();
} else {
    document.addEventListener('DOMContentLoaded', start, false);
}
