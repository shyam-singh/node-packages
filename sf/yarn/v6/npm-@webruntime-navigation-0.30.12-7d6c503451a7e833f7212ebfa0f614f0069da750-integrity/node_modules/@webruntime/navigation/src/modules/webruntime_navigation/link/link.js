/**
 * Copyright (c) 2019, salesforce.com, inc.
 * All rights reserved.
 * SPDX-License-Identifier: MIT
 * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/MIT
 */

import { LightningElement, api } from 'lwc';
import { generateUrl, navigate } from 'webruntime_navigation/navigation';
import { getNavigationContextId } from 'webruntime_navigation/navigationContext';

export default class Link extends LightningElement {
    @api path;
    @api route;
    navContext;

    /**
     * If no path was provided, generate one based on the route, if available.
     */
    async connectedCallback() {
        this.navContext = getNavigationContextId(this);
        if (!this.path && this.route) {
            this.path = await generateUrl(this.navContext, this.route);
        }
    }

    /**
     * Use the mixin to navigate on link click.
     *
     * @param {Event} event - Click event
     */
    handleClick(event) {
        event.preventDefault();
        navigate(this.navContext, this.route || this.path);
    }
}
