"use strict";
/** @hidden */
/**
 * Copyright (c) 2019, salesforce.com, inc.
 * All rights reserved.
 * SPDX-License-Identifier: MIT
 * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/MIT
 */
var __importDefault = (this && this.__importDefault) || function (mod) {
    return (mod && mod.__esModule) ? mod : { "default": mod };
};
Object.defineProperty(exports, "__esModule", { value: true });
const fs_1 = __importDefault(require("fs"));
const api_1 = require("@webruntime/api");
const messages_1 = require("../utils/messages");
const URL_PREFIX = 'webruntime';
const EXTENSION = '.js';
function getFrameworkResources(descriptor) {
    const resourcesJson = require.resolve('@webruntime/webruntime-shim/dist/resources.json');
    const resources = JSON.parse(fs_1.default.readFileSync(resourcesJson, 'utf8'));
    const uids = resources[descriptor];
    api_1.invariant(uids, messages_1.bootstrapMessages.MISSING_FRAMEWORK_RESOURCE, [descriptor]);
    const [, resourceName] = descriptor.split('://');
    // map to URLs
    const uidPaths = Object.keys(uids).reduce(function (result, mode) {
        const uid = uids[mode];
        result[mode] = `/${URL_PREFIX}/framework/${uid}/${mode}/${resourceName}${EXTENSION}`;
        return result;
    }, {});
    return {
        descriptor,
        modes: uidPaths,
    };
}
exports.default = getFrameworkResources;
//# sourceMappingURL=framework-resources.js.map