/**
 * Copyright (c) 2019, salesforce.com, inc.
 * All rights reserved.
 * SPDX-License-Identifier: MIT
 * For full license text, see the LICENSE file in the repo root or https://opensource.org/licenses/MIT
 */
import { defineModules } from 'webruntime_loader/loader';
import props from '@app/brandingProperties';

if (process.env.LWC_TARGET !== 'es5') {
    // in modern browsers, define the CSS variables in the DOM once
    Object.entries(props).forEach(([key, value]) =>
        document.documentElement.style.setProperty(key, value)
    );
} else {
    // in compat mode, define a @salesforce/cssvars/customProperties module
    // as a function that will return the CSS variables values from the provided map
    // every time a new component is created
    defineModules({
        '@salesforce/cssvars/customProperties': (customProperty, defaultValue) =>
            props[customProperty] ||
            defaultValue ||
            `var(${customProperty}${defaultValue ? `, ${defaultValue}` : ''})`,
    });
}
